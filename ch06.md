# 반복기와 생성기

# 06-1 반복기 이해하기

## 실습 프로젝트 설정

Node.js 프로젝트 설정과 tsconfig.json파일에 별도 설정이 필요함.
먼저, ch06-1 디렉터리를 만들고 터미널에서 다음 명형을 실행.

```shell
npm init --y
npm i -D typescript ts-node @types/node
mkdir src
```

- ch02-1 절 작성했던 tsconfig.json파일을 그대로 복사하거나
- 또는 tsc --init tsconfig.json 파일 생성

**downlevelIteration** **true** 로 설정!

```json
{
  "compilerOptions": {
    "module": "commonJS",
    "esModuleInterop":true,
    "target": "es5",
    "moduleResolution": "node",
    "outDir": "dist",
    "baseUrl": ".",
    "sourceMap": true,
    "downlevelIteration": true,
    "paths": {"*":["node_modules"]}
  },
  "include": ["src/**/*"]
}
```

## 반복기와 반복기 제공자

```typescript
const numArray: number [] = [1, 2, 3]
for (let value of numArray)
  console.log(value)

const strArray: string[] = ['hello', 'world', '!']
for(let value of strArray)
  console.log(value)
```

for ... of 구문은 다른 프로그래밍 언어에서도 '반복기(iterator)'라는 주제로 흔히 찾아볼 수 있음. 프로그래밍 언어마다 조금씩 구현 방식이 다르긴 하지만, 대부분 프로그래밍 언어에서 반복기는 다음과 같은 특징이 있는 객체임.

1. next라는 이름의 메서드 제공
2. next 메서드는 value와 done이라는 두 개의 속성을 가진 객체를 반환

```typescript
export const createRangeIterable = (from: number, to: number) => {
  let currentValue = from
  return {
    next(){
      const value = currentValue < to ? currentValue++ : undefined
      const done = value == undefined
      return {value, done}
    }
  }
}
```
```typescript
import { createRangeIterable } from './createRangeIterable'

const iterator = createRangeIterable(1, 3 + 1) //반복기는 현재 동작하지 않는다.
while(true){
  const {value, done} = iterator.next() // 반복기를 동작시킴.
  if(done) break
  console.log(value)
}
```

